// Generated by CoffeeScript 1.6.3
(function() {
  var freezer;

  freezer = null;

  $ready(function() {
    freezer = new VJ.Freezer({
      container: mass.query('.reg-step'),
      dark: true
    });
    $fadein(mass.query('.reg-step'), 1000);
    $event.on(mass.query('.role-reg-email-confirm'), 'click', function() {
      if (!/\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*/.test(jQuery('.role-reg-email').val())) {
        $text(mass.query('.reg-hint'), 'Invalid email address ∑(O_O；)');
        return;
      }
      return VJ.ajax({
        action: 'registerstep1',
        data: {
          mail: jQuery('.role-reg-email').val()
        },
        freezer: freezer,
        onSuccess: function(d) {
          return console.log(d);
        },
        onFailure: function(d) {
          return $text(mass.query('.reg-hint'), d.errorMsg);
        }
      });
    });
    return $event.on(mass.query('.role-reg-email'), 'keypress', function(event) {
      $empty(mass.query('.reg-hint'));
      if (event.which === 13) {
        return jQuery('.role-reg-email-confirm').click();
      }
    });
  });

}).call(this);
